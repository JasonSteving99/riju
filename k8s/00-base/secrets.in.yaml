---
kind: Secret
apiVersion: v1
metadata:
  namespace: metallb
  name: metallb-memberlist
data:
  secretkey: "{{ .metallb.secretkey | b64enc }}"

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: s3-auth
stringData:
  access-key: "{{ .s3.accessKey }}"
  secret-key: "{{ .s3.secretKey }}"

---
kind: ConfigMap
apiVersion: v1
metadata:
  namespace: riju
  name: s3-config
data:
  bucket: "{{ .s3.bucket }}"
  region: "{{ .s3.region }}"
  endpoint: "{{ .s3.endpoint }}"

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: registry-http-secret
stringData:
  http-secret: "{{ .registry.httpSecret }}"

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: registry-auth
data:
  htpasswd: "{{ .registry.htpasswd | println | b64enc }}"

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: registry-login
type: kubernetes.io/dockerconfigjson
stringData:
  .dockerconfigjson: |
    {
      "auths": {
        "localhost:30999": {
          "username": "admin",
          "password": "{{ .registry.password }}",
          "auth": "{{ .registry.password | printf "admin:%s" | b64enc }}"
        }
      }
    }

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju-user
  name: registry-user-login
type: kubernetes.io/dockerconfigjson
stringData:
  .dockerconfigjson: |
    {
      "auths": {
        "localhost:30999": {
          "username": "admin",
          "password": "{{ .registry.password }}",
          "auth": "{{ .registry.password | printf "admin:%s" | b64enc }}"
        }
      }
    }

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: minio-keys
stringData:
  access-key: "{{ .minio.accessKey }}"
  secret-key: "{{ .minio.secretKey }}"

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju-user
  name: minio-user-login
stringData:
  config.json: |
    {
      "version": "10",
      "aliases": {
        "riju": {
          "url": "http://minio.riju.svc",
          "accessKey": "{{ .minio.accessKey }}",
          "secretKey": "{{ .minio.secretKey }}",
          "api": "s3v4",
          "path": "auto"
        }
      }
    }

---
kind: Secret
apiVersion: v1
metadata:
  namespace: riju
  name: riju-proxy-auth
data:
  htpasswd: "{{ .proxy.htpasswd | println | b64enc }}"
